<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>XPenses</title>
  </head>
  <body lang='en'>
    <h1>Expenses summary</h1>

    <table id='summary-table'>
      <tr><th>Month</th><th>Total</th></tr>
    </table>

<!--    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script> -->
    <script src="/js/jquery"></script>
    <script>
    $.ajax({
      url: '/api/movements',
      method: 'POST',
      success: create_fake_movements_success,
    })

    function create_fake_movements_success() {
      $.ajax({
        url: '/api/summary',
        method: 'GET',
        success: summary_success,
      })
    }

    function summary_success(data) {
      console.log(data)
      data.forEach(row => {
        $('#summary-table tr:last').after(`<tr><td>${row.month}</td><td>${row.total}</td></tr>`);
      })
    }
    </script>
  </body>
</html>

