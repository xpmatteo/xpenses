<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>XPenses</title>
  </head>
  <body lang='en'>
    <h1>Expenses summary</h1>

    <table id='summary-table'>
      <tr><th>Month</th><th>Total</th></tr>
    </table>

    <form action="/api/movements" method="post" enctype="multipart/form-data">
      <p>
        <label for="file">Data file</label><input type="file" name="file" id="file">
        <input type="submit" value="Upload">
      </p>
    </form>

<!--    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script> -->
    <script src="/js/jquery-1.10.2.js"></script>
    <script>

    $.ajax({
      url: '/api/summary',
      method: 'GET',
      success: summary_success,
    })

    function summary_success(data) {
      console.log(data)
      data.forEach(row => {
        $('#summary-table tr:last').after(`<tr><td>${row.month}</td><td>${row.total}</td></tr>`);
      })
    }
    </script>
  </body>
</html>

